module.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){var r,n=[].indexOf;r=o(1),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},e.exports={config:{general:{title:"General Settings",type:"object",order:0,properties:{openDeveloperTools:{title:"Open Developer Tools",description:"Opens the Developer Tools prior to evaluating code",type:"boolean",default:!0,order:0},alwaysClearConsole:{title:"Always Clear Console",description:"Clears the console prior to evaluating code",type:"boolean",default:!0,order:1},showTimer:{title:"Show Timer",description:"Displays transpilation and execution times in console",type:"boolean",default:!0,order:2},babelPreset:{title:"Babel Preset",description:"Specify the default [preset](https://babeljs.io/docs/plugins/#presets) for Babel",type:"string",default:"es2015",enum:["es2015","es2016","es2017","env"],order:3},babelExperimentalPreset:{title:"Babel Experimental Preset",description:"Specify an [experimental preset](https://babeljs.io/docs/plugins/#presets-stage-x-experimental-presets-) for Babel",type:"string",default:"(none)",enum:["(none)","stage-0","stage-1","stage-2","stage-3"],order:4}}},javaScript:{title:"JavaScript Settings",type:"object",order:1,properties:{scopes:{title:"Scopes for JavaScript",description:"Space-delimited list of scopes identifying JavaScript files",type:"string",default:"source.js source.embedded.js",order:0},babelTransform:{title:"Babel Transform",description:"Transforms code with specified Babel presets (see above)",type:"boolean",default:!0,order:1}}},typeScript:{title:"TypeScript Settings",type:"object",order:2,properties:{scopes:{title:"Scopes for TypeScript",description:"Space-delimited list of scopes identifying TypeScript files",type:"string",default:"source.ts",order:0},babelTransform:{title:"Babel Transform",description:"Transforms code with specified Babel presets (see above)",type:"boolean",default:!1,order:1}}},coffeeScript:{title:"CoffeeScript Settings",type:"object",order:3,properties:{version:{title:"Version",description:"Specify the version of CoffeScript you would like to use",type:"string",default:"v2",enum:["v1","v2"],order:0},scopes:{title:"Scopes for CoffeeScript",description:"Space-delimited list of scopes identifying CoffeeScript files",type:"string",default:"source.coffee source.embedded.coffee source.litcoffee",order:1},bare:{title:"Bare",description:"Compiles the JavaScript without the [top-level function safety wrapper](http://coffeescript.org/#lexical-scope)",type:"boolean",default:!0,order:2},babelTransform:{title:"Babel Transform",description:"Transforms code with specified Babel presets (see above)",type:"boolean",default:!1,order:3}}}},subscriptions:null,activate:function(){var e;return({CompositeDisposable:e}=o(2)),this.subscriptions=new e,this.subscriptions.add(atom.commands.add("atom-workspace",{"evaluate:run-code":()=>this.evaluate()}))},deactivate:function(){var e;return null!=(e=this.subscriptions)&&e.dispose(),this.subscriptions=null},runCodeInScope:function(e,t,n){var i,a,s,l,c;if(this.isSupportedScope(t)){atom.config.get("evaluate.general.alwaysClearConsole")&&r.runInThisContext(console.clear());try{return n(null,null,this.evaluateJavaScript(e))}catch(e){return n(e)}}else if(this.isSupportedScope(t,"coffeeScript")){a=atom.config.get("evaluate.coffeeScript.version"),i=o("v2"===a?3:4),atom.config.get("evaluate.general.alwaysClearConsole")&&r.runInThisContext(console.clear()),l={bare:atom.config.get("evaluate.coffeeScript.bare")};try{return atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.time(`Compiled CoffeeScript ${a}`)),s=i.compile(e,l),atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.timeEnd(`Compiled CoffeeScript ${a}`)),n(null,null,this.evaluateJavaScript(s,"coffeeScript"))}catch(e){return n(e)}}else{if(!this.isSupportedScope(t,"typeScript"))return n(null,`Evaluating '${t}' is not supported.`);c=o(5),atom.config.get("evaluate.general.alwaysClearConsole")&&r.runInThisContext(console.clear());try{return atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.time("Compiled TypeScript")),s=c.compile(e),atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.timeEnd("Compiled TypeScript")),n(null,null,this.evaluateJavaScript(s,"typeScript"))}catch(e){return n(e)}}},evaluate:function(){var e,t,o;return atom.config.get("evaluate.general.openDeveloperTools")&&atom.openDevTools(),t=atom.workspace.getActiveTextEditor(),(e=this.getSelections(t))?o=this.matchingCursorScopeInEditor(t):(e=t.getText(),o=this.scopeInEditor(t)),this.runCodeInScope(e,o,(function(e,t,o){if(e){if(e)return console.error(e)}else if(t){if(t)return console.warn(t)}else if(o)return console.log(o)}))},evaluateJavaScript:function(e,t="javaScript"){var n;return atom.config.get(`evaluate.${t}.babelTransform`)&&(e=this.babelCompile(e,t).code),o(6).sendEvent("evaluate",t.capitalize()),atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.time("Evaluated JavaScript")),n=r.runInThisContext(e),atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.timeEnd("Evaluated JavaScript")),n},babelCompile:function(e){var t,n,i,a,s,l;return t=o(10),l=[],s=atom.config.get("evaluate.general.babelPreset")||"es2015",l.push(`babel-preset-${s}`),"(none)"!==(i=atom.config.get("evaluate.general.babelExperimentalPreset"))&&l.push(`babel-preset-${i}`),a={ast:!1,code:!0,presets:l.map(o(11).resolve)},atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.time(`Transformed with Babel ["${l.join('", "')}"]`)),n=t.transform(e,a),atom.config.get("evaluate.general.showTimer")&&r.runInThisContext(console.timeEnd(`Transformed with Babel ["${l.join('", "')}"]`)),n},matchingCursorScopeInEditor:function(e){var t,o,r,i;for(t=0,o=(i=this.getScopes()).length;t<o;t++)if(r=i[t],n.call(e.getLastCursor().getScopeDescriptor().scopes,r)>=0)return r},isSupportedScope:function(e,t="javaScript"){return n.call(atom.config.get(`evaluate.${t}.scopes`).trim().split(" "),e)>=0},getScopes:function(){var e,t,o,r,n;for(o="",e=0,t=(n=["javaScript","typeScript","coffeeScript"]).length;e<t;e++)r=n[e],o+=atom.config.get(`evaluate.${r}.scopes`).trim()+" ";return o.trim().split(" ")},scopeInEditor:function(e){var t;return null!=(t=e.getGrammar())?t.scopeName:void 0},getSelections:function(e){var t,o,r,n;if(t="",(n=e.getSelections())[0].getText())for(o=0,r=n.length;o<r;o++)t+=n[o].getText();return t}}},function(e,t){e.exports=require("vm")},function(e,t){e.exports=require("atom")},function(e,t){e.exports=require("coffeescript")},function(e,t){e.exports=require("coffee-script")},function(e,t){e.exports=require("typestring")},function(e,t,o){var r,n;n=function(){var e;return`${(e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`},e.exports=r={getCid:function(e){this.cid?e(this.cid):o(7).getMac((function(t,r){return e(this.cid=t?n():o(8).createHash("sha1").update(r,"utf8").digest("hex"))}))},sendEvent:function(e,t,o,r){var n;n={t:"event",ec:e,ea:t},o&&(n.el=o),r&&(n.ev=r),this.send(n)},send:function(e){atom.packages.getActivePackage("metrics")&&this.getCid((function(t){Object.assign(e,{cid:t},r.defaultParams()),r.request("https://www.google-analytics.com/collect?"+o(9).stringify(e))}))},request:function(e){navigator.onLine&&this.post(e)},post:function(e){var t;(t=new XMLHttpRequest).open("POST",e),t.send(null)},defaultParams:function(){return{v:1,aip:1,ds:"app",tid:"UA-53539506-10",ua:`Atom v${atom.appVersion} (${atom.getReleaseChannel()})`}}}},function(e,t){e.exports=require("getmac")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("babel-core")},function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=11}]);
//# sourceMappingURL=evaluate.js.map